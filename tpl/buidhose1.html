<!doctype html><html><head>    <meta charset="UTF-8">    <title>创建纪念馆</title>    <meta name="viewport"          content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>    <link href="../css/mui.min.css" rel="stylesheet"/>    <link href="../css/index.css?version=3.0" rel="stylesheet"/>    <link href="../css/buiding.css?version=3.0" rel="stylesheet"/>    <script src="../js/jquery-1.10.2.js"></script>    <script src="../js/weixinShare.js" type="text/javascript" charset="utf-8"></script></head><style type="text/css">    .mui-table-view-cell {        border: 1px solid white;    }    #imgChangjing {        vertical-align: middle;        width: 80%;    }    .checkedImg {        border: 2px solid #007AFF;    }</style><body><div class="mui-content">    <h5 class="mui-content-padded">请选择纪念类型</h5>    <div class="mui-card">        <form class="mui-input-group">            <div class="mui-input-row mui-radio mui-left">                <label>个人馆</label>                <input name="memorialType" type="radio" value="personal" checked>            </div>            <div class="mui-input-row mui-radio mui-left">                <label>名人馆</label>                <input name="memorialType" type="radio" value="celebrity">            </div>        </form>    </div>    <h5 class="mui-content-padded">请设置纪念馆名称：</h5>    <div class="mui-input-row">        <input type="text" id="memorialName" placeholder="2-5个字，限中文">    </div>    <h5 class="mui-content-padded">请修改馆主类型</h5>    <div class="mui-card">        <form class="mui-input-group">            <div class="mui-input-row mui-radio mui-left">                <label>活人</label>                <input name="survivalMode" type="radio" value="A" checked>            </div>            <div class="mui-input-row mui-radio mui-left">                <label>逝者</label>                <input name="survivalMode" type="radio" value="B">            </div>        </form>    </div>    <div class="mui-slider">        <div class="mui-slider-indicator mui-segmented-control mui-segmented-control-inverted">            <a class="mui-control-item" href="#item1">选择平台模板</a>            <a class="mui-control-item" href="#item2">自定义上传模板</a>        </div>        <div id="sliderProgressBar" class="mui-slider-progress-bar mui-col-xs-6"></div>        <div class="mui-slider-group">            <div id="item1" class="mui-slider-item mui-control-content mui-active">                <ul class="mui-table-view" id="mpersonal">                    <!--<h5 class="mui-content-padded">请选择纪念馆模板：</h5>-->                    <div class="mui-slider">                        <div class="mui-slider-group mui-slider-loop">                            <div class="mui-slider-item">                                <ul class="mui-table-view mui-grid-view" id="modelChose">                                </ul>                            </div>                        </div>                    </div>                </ul>            </div>            <div id="item2" class="mui-slider-item mui-control-content">                <ul class="mui-table-view" id="mcustom">                    <div class="deathPhoto">                        <h5 class="mudiImg mui-content-padded">墓地照片</h5>                        <img class="userImg" id="myimgID" width="128px" height="164px" src="../img/deathimg.png"/>                        <form id="uploadImgForm">                            <input id="upload" name="fileName" onchange="uploadImg()" accept="image/*" type="file"                                   style="display: none"/>                        </form>                        <h5 class="bili mui-content-padded">最佳比例720*1280</h5>                    </div>                </ul>            </div>        </div>    </div>    <div id="quanxian">        <h5 class="mui-content-padded">进入权限：</h5>        <div id="chousejoinType" class="mui-switch mui-switch-blue mui-switch-mini switchdiv mui-active">            <div class="mui-switch-handle"></div>        </div>    </div></div><input type="hidden" id="joinType" value="password" placeholder=""><div class="mui-input-row">    <input type="password" id="password" placeholder="6个数字"></div><input type="hidden" id="memorialModelId"><button type="button" id="nextB" class="mui-btn mui-btn-primary mui-btn-block nextbtn">下一步</button><input id="customizeHeadImg" type="hidden" value=""/><input id="modelSource" type="hidden" value="A"/><script src="../js/mui.min.js"></script><script type="text/javascript">    mui.init()    //模版列表    var imgBase = "http://img.yunji128.com/";    var urlBase = 'http://api.yunji128.com/homage';    var isManual = true; //标志按钮最后状态    $(function () {        //对按钮进行监听        document.getElementById("chousejoinType").addEventListener('tap', function (event) {            isManual = !isManual;            if (isManual) {                $("#joinType").val("password");                $('#password').show();            } else {                $("#joinType").val("direct");                $('#password').hide();            }        });    });    $.ajax({        headers: {            tokenInfo: window.localStorage.getItem("tokenInfo")        },        type: "GET",        contentType: "application/json",        dataType: "json",        url: urlBase + "/api/memorial/modelList?deviceType=H5", //这里是网址        success: function (data) {            var list = data.result;            var contens = "";            $.each(list, function () {                contens += '<li class="mui-table-view-cell mui-media mui-col-xs-4" id="abc_' + this.memorialModelId + '">'                    +                    '<a href="javascript:chouseModel(' + this.memorialModelId + ');" ><img id="imgChangjing" class="mui-media-object" src="' + imgBase + this.thumImg + '"><div class="mui-media-body">' + this.modelName + '</div></a></li>'            });            document.getElementById('modelChose').innerHTML = contens;        },        error: function (message) {            mui.alert("读取姓氏列表失败");        }    });    function chouseModel(memorialModelId) {        $(".mui-table-view-cell").removeClass("checkedImg")        $("#abc_" + memorialModelId).addClass("checkedImg")        $("#memorialModelId").val(memorialModelId);        $("modelSource").val('A');        $("#customizeHeadImg").val('');    }    $("#myimgID").click(function () {        $("#upload").click();    });    function uploadImg() {        var fd = new FormData(document.getElementById("uploadImgForm"));        fd.append("path", "h5/customizeHead");        fd.append("fileFormat", "img");        fd.append("fileSize", "10001");        $.ajax({            type: "POST",            url: urlBase + "/file/fileUpload",            data: fd,//FormId            processData: false,  // 告诉jQuery不要去处理发送的数据            contentType: false,   // 告诉jQuery不要去设置Content-Type请求头            error: function (request) {                //layer.mui.alert('添加出现异常', {icon: 5});            },            success: function (data) {                if (data.code == 'SUCCESS') {                    $("#myimgID").attr("src", imgBase + data.result.path);                    $("#customizeHeadImg").val(data.result.path);                    $("#modelSource").val('B');                    $(".mui-table-view-cell").removeClass("checkedImg")                    $("#memorialModelId").val('');                } else {                    mui.alert(data.message);                }            }        });    }    $("#nextB").click(function () {        var memorialType = $('input[name="memorialType"]:checked ').val();        var survivalMode = $('input[name="survivalMode"]:checked ').val();        var memorialName = $("#memorialName").val();        var joinType = $("#joinType").val();        var modelSource = $("#modelSource").val();        var customizeHeadImg = $("#customizeHeadImg").val();        var memorialModelId = $("#memorialModelId").val();        var password = $('#password').val();        if (memorialName == '') {            mui.alert("请输入纪念馆名字");            return;        }        if (modelSource == "A") {            if (memorialModelId == '') {                mui.alert("请选择一个模版");                return;            }        }        if (modelSource == "B") {            if (customizeHeadImg == '') {                mui.alert("请伤传自定义图片");                return;            }        }        window.location.href = "buidhose2.html?memorialType=" + memorialType + "&survivalMode=" + survivalMode +            "&memorialName=" + memorialName + "&memorialModelId=" + memorialModelId + "&joinType=" + joinType + "&password=" + password            + "&modelSource=" + modelSource + "&customizeHeadImg=" + customizeHeadImg;    });</script></body></html>